# JSON-RPC



## 1. RPC 是什么

- RPC（Remote Procedure Call）指的是远程过程调用，简单的说，RPC 就是从一台机器上通过参数传递的方式调用另一台机器上的一个函数或方法并得到响应结果。
- RPC 会隐藏底层的通讯细节。
- RPC 是一个请求响应模型，客户端发起请求，服务器返回响应。
- RPC 在使用形式上像调用本地函数一样去调用远程的函数。

根据不同的开发语言、网络协议和序列化协议等差异，目前有许多不同的 RPC 框架，JSON-RPC 就是一个无状态且轻量级的远程过程调用（RPC）协议。实际上，HTTP 请求本身也可以看做是 RPC 的一种具体形式，如果想开放机器的部分功能给外界调用，那么使用 HTTP API 的形式是非常合适的。而对于公司内部的机器之间，更常见的做法是按照实际需要去自定制一套 RPC，这样做的好处是灵活高效，但是坏处就是没有通用性（不过也提高了安全性）。

JSON-RPC 是基于 JSON 的跨语言远程调用协议，比 xml-rpc、webservice 等基于文本的协议传输数据格小；相对 hessian、java-rpc 等二进制协议便于调试、实现、扩展，是非常优秀的一种远程调用协议。



## 2. JSON-RPC 协议

协议非常简单，发起远程调用时向服务端传输数据格式如下：

```json
{ "method": "sayHello", "params": ["Hello JSON-RPC"], "id": 1}
```

**参数说明：**

- `method`：调用的方法名
- `params`：方法传入的参数，若无参数则传入 `[]`
- `id`：调用标识符，用于标示一次远程调用过程

服务器其收到调用请求，处理方法调用，将方法效用结果效应给调用方；返回数据格式：

```json
{
    "result": "Hello JSON-RPC",
    "error": null,
    "id": 1
} 
```

**参数说明:**

- `result`：方法返回值，若无返回值，则返回 null。若调用错误，返回 null。
- `error`：调用时错误，无错误返回 null。
- `id`：调用标识符，与调用方传入的标识符一致。

以上就是 JSON-RPC 协议规范，非常简单、小巧，便于各种语言实现。